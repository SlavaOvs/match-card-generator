<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Генератор карточек матча</title>
  <style>
    /* OswaldFont */
    @font-face {
      font-family: 'Oswald';
      font-style: normal;
      font-weight: 500;
      src: url('Oswald/static/Oswald-Medium.ttf') format('truetype');
    }
    body {
      font-family: 'Oswald', sans-serif;
      max-width: 480px;
      margin: 0 auto;
      padding: 1rem;
    }
    label, input, select, button {
      display: block;
      width: 100%;
      margin-bottom: 0.75rem;
      font-family: 'Oswald', sans-serif;
    }
    .date-inputs {
      display: flex;
      gap: 0.5rem;
    }
    .date-inputs input,
    .date-inputs select {
      flex: 1;
    }
    .canvas-wrapper {
      width: 100%;
      max-width: 480px;
      margin: 1rem auto;
      overflow: hidden;
    }
    canvas {
      display: block;
      width: 100%;
      height: auto;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      padding: 0.5rem;
      font-size: 1rem;
    }
    a#downloadLink {
      display: none;
      text-align: center;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>Генератор карточек матча</h1>

  <!-- Команды -->
  <label>Команда хозяев:
    <input list="teamsList" id="homeTeam" placeholder="Начните вводить...">
  </label>
  <label>Команда гостей:
    <input list="teamsList" id="awayTeam" placeholder="Начните вводить...">
  </label>
  <datalist id="teamsList">
    <option value="Сиэтл Кракен">
    <option value="Эдмонтон Ойлерз">
  </datalist>

  <!-- Лиги -->
  <label>Лига:
    <input list="leaguesList" id="league" placeholder="Начните вводить...">
  </label>
  <datalist id="leaguesList">
    <option value="НХЛ">
    <option value="КХЛ">
    <option value="Чемпионат Беларуси">
    <option value="Чемпионат мира">
    <option value="МХЛ">
    <option value="ВХЛ">
  </datalist>

  <!-- Дата (день и месяц отдельно) -->
  <label>Дата матча:</label>
  <div class="date-inputs">
    <input type="number" id="matchDay" min="1" max="31" placeholder="День">
    <select id="matchMonth">
      <option value="0">ЯНВАРЯ</option>
      <option value="1">ФЕВРАЛЯ</option>
      <option value="2">МАРТА</option>
      <option value="3">АПРЕЛЯ</option>
      <option value="4">МАЯ</option>
      <option value="5">ИЮНЯ</option>
      <option value="6">ИЮЛЯ</option>
      <option value="7">АВГУСТА</option>
      <option value="8">СЕНТЯБРЯ</option>
      <option value="9">ОКТЯБРЯ</option>
      <option value="10">НОЯБРЯ</option>
      <option value="11">ДЕКАБРЯ</option>
    </select>
  </div>

  <!-- Время -->
  <label for="matchTime">Время матча:</label>
  <input type="time" id="matchTime">

  <!-- Опции -->
  <label><input type="checkbox" id="addLogoHp"> Добавить логотип Hockey Plus</label>
  <label><input type="checkbox" id="showVS"> Показать "VS"</label>

  <button id="generate">Сгенерировать карточку</button>
  <a id="downloadLink"></a>

  <div class="canvas-wrapper">
    <canvas id="preview" width="2000" height="2000"></canvas>
  </div>

  <script>
    const teams = [
      { name: 'Сиэтл Кракен', logo: 'images/Команды/Сиэтл.png' },
      { name: 'Эдмонтон Ойлерз', logo: 'images/Команды/Эдмонтон.png' }
    ];
    const leagues = [
      { name: 'НХЛ', logo: 'images/Лиги/НХЛ.png', x:118, y:50 },
      { name: 'КХЛ', logo: 'images/Лиги/КХЛ.png', x:121, y:50 },
      { name: 'Чемпионат Беларуси', logo: 'images/Лиги/Чемпионат Беларуси.png', x:60, y:50 },
      { name: 'Чемпионат мира', logo: 'images/Лиги/Чемпионат мира.png', x:83, y:50 },
      { name: 'МХЛ', logo: 'images/Лиги/МХЛ.png', x:114, y:50 },
      { name: 'ВХЛ', logo: 'images/Лиги/ВХЛ.png', x:121, y:50 }
    ];

    function loadImage(url) {
      return new Promise((res, rej) => {
        const img = new Image(); img.crossOrigin = 'anonymous';
        img.onload = () => res(img);
        img.onerror = () => rej(new Error('Не удалось загрузить '+url));
        img.src = url;
      });
    }

    async function drawCard() {
      await document.fonts.load('500 10px Oswald');
      const home = document.getElementById('homeTeam').value;
      const away = document.getElementById('awayTeam').value;
      const leagueName = document.getElementById('league').value;
      const day = document.getElementById('matchDay').value;
      const monthIndex = document.getElementById('matchMonth').value;
      const time = document.getElementById('matchTime').value;
      const addLogoHp = document.getElementById('addLogoHp').checked;
      const showVS = document.getElementById('showVS').checked;
      if(!home||!away||!leagueName||!day||monthIndex===''||!time) {
        return alert('Заполните все поля');
      }
      const canvas=document.getElementById('preview');
      const ctx=canvas.getContext('2d');
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // фон
      const bg=await loadImage('images/Фон/Фон.png');
      ctx.drawImage(bg,0,0,canvas.width,canvas.height);
      // команды
      const homeObj=teams.find(t=>t.name===home);
      const awayObj=teams.find(t=>t.name===away);
      const imgHome=await loadImage(homeObj.logo);
      const imgAway=await loadImage(awayObj.logo);
      ctx.drawImage(imgHome,220,500);
      ctx.drawImage(imgAway,1226,500);
      // лига
      const leagueObj=leagues.find(l=>l.name===leagueName);
      const imgLeague=await loadImage(leagueObj.logo);
      ctx.drawImage(imgLeague,leagueObj.x,leagueObj.y);
      // HP лого
      if(addLogoHp){
        const hp=await loadImage('images/Hockey Plus/Лого.png');
        ctx.drawImage(hp,850,1850);
      }
      // устанавливаем белый цвет текста
      ctx.fillStyle='#fff';
      // VS
      if(showVS){
        ctx.font='500 100px Oswald';
        ctx.textAlign='left';
        ctx.fillText('VS',950,950);
      }
      // дата
      const months=['ЯНВАРЯ','ФЕВРАЛЯ','МАРТА','АПРЕЛЯ','МАЯ','ИЮНЯ','ИЮЛЯ','АВГУСТА','СЕНТЯБРЯ','ОКТЯБРЯ','НОЯБРЯ','ДЕКАБРЯ'];
      const dateText = day.padStart(2,'0')+' '+months[monthIndex];
      ctx.font='500 60px Oswald';
      ctx.textAlign='center';
      ctx.fillText(dateText,canvas.width/2,523);
      // время
      ctx.font='500 116px Oswald';
      ctx.fillText(time,canvas.width/2,595);
      // загрузка
      const link=document.getElementById('downloadLink');
      link.style.display='block';link.href=canvas.toDataURL('image/png');
      link.download=`${home}_vs_${away}.png`;link.textContent='Скачать PNG';
    }
    document.getElementById('generate').addEventListener('click',drawCard);
  </script>
</body>
</html>
